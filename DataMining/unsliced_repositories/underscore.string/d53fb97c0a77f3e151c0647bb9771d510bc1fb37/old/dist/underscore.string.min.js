!function(e){"use strict";var t=String.prototype.trim,n=String.prototype.trimRight,r=String.prototype.trimLeft,i=function(e){return e*1||0},s=function(e,t){if(t<1)return"";var n="";while(t>0)t&1&&(n+=e),t>>=1,e+=e;return n},o=[].slice,u=function(e,t,n){if(typeof e=="undefined"||e===null)e="";return(""+e).replace(t,n)},a=function(e){return e!=null?"["+d.escapeRegExp(e)+"]":"\\s"},f=function(e,t){if(typeof e=="undefined"||e===null)e="";if(typeof t=="undefined"||t===null)t="";e+="",t+="";var n=[],r,i;for(var s=0;s<=t.length;s++)for(var o=0;o<=e.length;o++)s&&o?e.charAt(o-1)===t.charAt(s-1)?i=r:i=Math.min(n[o],n[o-1],r)+1:i=s+o,r=n[o],n[o]=i;return n.pop()},l={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},c={};for(var h in l)c[l[h]]=h;var p=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var t=s,n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,r){var i=1,s=n.length,o="",u,a=[],f,l,c,h,d,v;for(f=0;f<s;f++){o=e(n[f]);if(o==="string")a.push(n[f]);else if(o==="array"){c=n[f];if(c[2]){u=r[i];for(l=0;l<c[2].length;l++){if(!u.hasOwnProperty(c[2][l]))throw new Error(p('[_.sprintf] property "%s" does not exist',c[2][l]));u=u[c[2][l]]}}else c[1]?u=r[c[1]]:u=r[i++];if(/[^s]/.test(c[8])&&e(u)!="number")throw new Error(p("[_.sprintf] expecting number but found %s",e(u)));switch(c[8]){case"b":u=u.toString(2);break;case"c":u=String.fromCharCode(u);break;case"d":u=parseInt(u,10);break;case"e":u=c[7]?u.toExponential(c[7]):u.toExponential();break;case"f":u=c[7]?parseFloat(u).toFixed(c[7]):parseFloat(u);break;case"o":u=u.toString(8);break;case"s":u=(u=String(u))&&c[7]?u.substring(0,c[7]):u;break;case"u":u=Math.abs(u);break;case"x":u=u.toString(16);break;case"X":u=u.toString(16).toUpperCase()}u=/[def]/.test(c[8])&&c[3]&&u>=0?"+"+u:u,d=c[4]?c[4]=="0"?"0":c[4].charAt(1):" ",v=c[6]-String(u).length,h=c[6]?t(d,v):"",a.push(c[5]?u+h:h+u)}}return a.join("")},n.cache={},n.parse=function(e){var t=e,n=[],r=[],i=0;while(t){if((n=/^[^\x25]+/.exec(t))!==null)r.push(n[0]);else if((n=/^\x25{2}/.exec(t))!==null)r.push("%");else{if((n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t))===null)throw new Error("[_.sprintf] huh?");if(n[2]){i|=1;var s=[],o=n[2],u=[];if((u=/^([a-z_][a-z_\d]*)/i.exec(o))===null)throw new Error("[_.sprintf] huh?");s.push(u[1]);while((o=o.substring(u[0].length))!=="")if((u=/^\.([a-z_][a-z_\d]*)/i.exec(o))!==null)s.push(u[1]);else{if((u=/^\[(\d+)\]/.exec(o))===null)throw new Error("[_.sprintf] huh?");s.push(u[1])}n[2]=s}else i|=2;if(i===3)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");r.push(n)}t=t.substring(n[0].length)}return r},n}(),d={VERSION:"2.2.0rc",isBlank:function(e){return e==null&&(e=""),/^\s*$/.test(e)},stripTags:function(e){return u(e,/<\/?[^>]+>/g,"")},capitalize:function(e){return e==null&&(e=""),e+="",e.charAt(0).toUpperCase()+e.slice(1)},chop:function(e,t){return e+="",t=~~t,t>0?e.match(new RegExp(".{1,"+t+"}","g")):[e]},clean:function(e){return d.strip(e).replace(/\s+/g," ")},count:function(e,t){return e==null&&(e=""),t==null&&(t=""),e+="",t+="",e.split(t).length-1},chars:function(e){return e==null&&(e=""),(""+e).split("")},swapCase:function(e){return u(e,/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})},escapeHTML:function(e){return u(e,/[&<>"']/g,function(e){return"&"+c[e]+";"})},unescapeHTML:function(e){return u(e,/\&([^;]+);/g,function(e,t){var n;return t in l?l[t]:(n=t.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(n[1],16)):(n=t.match(/^#(\d+)$/))?String.fromCharCode(~~n[1]):e})},escapeRegExp:function(e){return u(e,/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},insert:function(e,t,n){var r=d.chars(e);return r.splice(~~t,0,""+n),r.join("")},include:function(e,t){return e==null&&(e=""),!!~(""+e).indexOf(t)},join:function(){var e=o.call(arguments),t=e.shift();return t==null&&(t=""),e.join(t)},lines:function(e){return e==null||e==""?"":(""+e).split("\n")},reverse:function(e){return d.chars(e).reverse().join("")},splice:function(e,t,n,r){var i=d.chars(e);return i.splice(~~t,~~n,r),i.join("")},startsWith:function(e,t){return e+="",t+="",e.length>=t.length&&e.slice(0,t.length)===t},endsWith:function(e,t){return e+="",t+="",e.length>=t.length&&e.slice(e.length-t.length)===t},succ:function(e){e+="";var t=d.chars(e);return t.splice(e.length-1,1,String.fromCharCode(e.charCodeAt(e.length-1)+1)),t.join("")},titleize:function(e){return u(e,/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},camelize:function(e){return d.trim(e).replace(/[-_\s]+(.)?/g,function(e,t){return t.toUpperCase()})},underscored:function(e){return d.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return d.trim(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(e){return d.titleize(u(e,/_/g," ")).replace(/\s/g,"")},humanize:function(e){return d.capitalize(d.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,n){return e==null&&(e=""),e+="",!n&&t?t.call(e):(n=a(n),e.replace(new RegExp("^"+n+"+|"+n+"+$","g"),""))},ltrim:function(e,t){return e==null&&(e=""),e+="",!t&&r?r.call(e):(t=a(t),e.replace(new RegExp("^"+t+"+"),""))},rtrim:function(e,t){return e==null&&(e=""),e+="",!t&&n?n.call(e):(t=a(t),e.replace(new RegExp(t+"+$"),""))},truncate:function(e,t,n){return e==null&&(e=""),e+="",n=n||"...",t=~~t,e.length>t?e.slice(0,t)+n:e},prune:function(e,t,n){e==null&&(e=""),e+="",t=~~t,n=n!=null?""+n:"...";if(e.length<=t)return e;var r=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},i=e.slice(0,t+1).replace(/.(?=\W*\w*$)/g,r);return i.slice(i.length-2).match(/\w\w/)?i=i.replace(/\s*\S+$/,""):i=d.rtrim(i.slice(0,i.length-1)),(i+n).length>e.length?e:e.slice(0,i.length)+n},words:function(e,t){return e==null||e==""?"":d.trim(e,t).split(t||/\s+/)},pad:function(e,t,n,r){e==null&&(e=""),e+="";var i=0;t=~~t,n?n.length>1&&(n=n.charAt(0)):n=" ";switch(r){case"right":return i=t-e.length,e+s(n,i);case"both":return i=t-e.length,s(n,Math.ceil(i/2))+e+s(n,Math.floor(i/2));default:return i=t-e.length,s(n,i)+e}},lpad:function(e,t,n){return d.pad(e,t,n)},rpad:function(e,t,n){return d.pad(e,t,n,"right")},lrpad:function(e,t,n){return d.pad(e,t,n,"both")},sprintf:p,vsprintf:function(e,t){return t.unshift(e),p.apply(null,t)},toNumber:function(e,t){if(e==null||e=="")return 0;e+="";var n=i(i(e).toFixed(~~t));return n===0&&!e.match(/^0+$/)?Number.NaN:n},strRight:function(e,t){e==null&&(e=""),e+="",t=t!=null?""+t:t;var n=t?e.indexOf(t):-1;return~n?e.slice(n+t.length,e.length):e},strRightBack:function(e,t){e==null&&(e=""),e+="",t=t!=null?""+t:t;var n=t?e.lastIndexOf(t):-1;return~n?e.slice(n+t.length,e.length):e},strLeft:function(e,t){e==null&&(e=""),e+="",t=t!=null?""+t:t;var n=t?e.indexOf(t):-1;return~n?e.slice(0,n):e},strLeftBack:function(e,t){e==null&&(e=""),e+="",t=t!=null?""+t:t;var n=e.lastIndexOf(t);return~n?e.slice(0,n):e},toSentence:function(e,t,n){t||(t=", "),n||(n=" and ");var r=e.length,i="";for(var s=0;s<r;s++)i+=e[s],s===r-2?i+=n:s<r-1&&(i+=t);return i},slugify:function(e){var t="ąàáäâãćęèéëêìíïîłńòóöôõùúüûñçżź",n="aaaaaaceeeeeiiiilnooooouuuunczz",r=new RegExp(a(t),"g");if(typeof e=="undefined"||e===null)e="";return e=(""+e).toLowerCase(),e=e.replace(r,function(e){var r=t.indexOf(e);return n.charAt(r)||"-"}),d.dasherize(e.replace(/[^\w\s-]/g,""))},surround:function(e,t){return[t,e,t].join("")},quote:function(e){return d.surround(e,'"')},exports:function(){var e={};for(var t in this){if(!this.hasOwnProperty(t)||t.match(/^(?:include|contains|reverse)$/))continue;e[t]=this[t]}return e},repeat:function(e,t,n){t=~~t;if(e==null)return"";if(n==null)return s(e+"",t);for(var r=[];t>0;r[--t]=e);return r.join(n)},levenshtein:f};d.strip=d.trim,d.lstrip=d.ltrim,d.rstrip=d.rtrim,d.center=d.lrpad,d.rjust=d.lpad,d.ljust=d.rpad,d.contains=d.include,d.q=d.quote,typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(module.exports=d),exports._s=d):typeof define=="function"&&define.amd?define("underscore.string",[],function(){return d}):(e._=e._||{},e._.string=e._.str=d)}(this);